# Compute Units

All notable changes in compute units usage will be documented in this file.

The changes are calculated by comparing the current results with the last version's results. Increase in usage is shown with 游댮 and decrease is shown with 游릭.

The programs and their tests are located in [/tests/bench](https://github.com/coral-xyz/anchor/tree/master/tests/bench).

> **Note**
> Results documented in this file are autogenerated. Running the tests will update the current results when necessary, manually editing the results should be avoided.

> **Warning**
> Results may vary depending on Solana version.

## [Unreleased]

Solana version: 2.1.0

| Instruction                 | Compute Units | -                      |
| --------------------------- | ------------- | ---------------------- |
| accountInfo1                | 571           | 游릭 **-30 (4.99%)**     |
| accountInfo2                | 895           | 游릭 **-28 (3.03%)**     |
| accountInfo4                | 1,553         | 游릭 **-30 (1.90%)**     |
| accountInfo8                | 2,923         | 游릭 **-52 (1.75%)**     |
| accountEmptyInit1           | 5,083         | 游댮 **+49 (0.97%)**     |
| accountEmpty1               | 645           | 游릭 **-7 (1.07%)**      |
| accountEmptyInit2           | 9,301         | 游릭 **-386 (3.98%)**    |
| accountEmpty2               | 1,007         | 游릭 **-9 (0.89%)**      |
| accountEmptyInit4           | 17,764        | 游릭 **-737 (3.98%)**    |
| accountEmpty4               | 1,724         | 游릭 **-13 (0.75%)**     |
| accountEmptyInit8           | 34,723        | 游릭 **-1,446 (4.00%)**  |
| accountEmpty8               | 3,163         | 游릭 **-23 (0.72%)**     |
| accountSizedInit1           | 5,192         | 游댮 **+86 (1.68%)**     |
| accountSized1               | 693           | 游댮 **+25 (3.74%)**     |
| accountSizedInit2           | 9,489         | 游릭 **-339 (3.45%)**    |
| accountSized2               | 1,075         | 游댮 **+29 (2.77%)**     |
| accountSizedInit4           | 18,170        | 游릭 **-667 (3.54%)**    |
| accountSized4               | 1,848         | 游댮 **+41 (2.27%)**     |
| accountSizedInit8           | 35,433        | 游릭 **-1,328 (3.61%)**  |
| accountSized8               | 3,387         | 游댮 **+61 (1.83%)**     |
| accountUnsizedInit1         | 5,305         | 游댮 **+106 (2.04%)**    |
| accountUnsized1             | 746           | 游댮 **+44 (6.27%)**     |
| accountUnsizedInit2         | 9,759         | 游릭 **-319 (3.17%)**    |
| accountUnsized2             | 1,163         | 游댮 **+47 (4.21%)**     |
| accountUnsizedInit4         | 18,603        | 游릭 **-656 (3.41%)**    |
| accountUnsized4             | 2,002         | 游댮 **+49 (2.51%)**     |
| accountUnsizedInit8         | 35,993        | 游릭 **-1,338 (3.58%)**  |
| accountUnsized8             | 3,673         | 游댮 **+47 (1.30%)**     |
| boxedAccountEmptyInit1      | 5,175         | 游댮 **+111 (2.19%)**    |
| boxedAccountEmpty1          | 734           | 游댮 **+63 (9.39%)**     |
| boxedAccountEmptyInit2      | 9,414         | 游릭 **-307 (3.16%)**    |
| boxedAccountEmpty2          | 1,116         | 游댮 **+64 (6.08%)**     |
| boxedAccountEmptyInit4      | 17,918        | 游릭 **-664 (3.57%)**    |
| boxedAccountEmpty4          | 1,872         | 游댮 **+61 (3.37%)**     |
| boxedAccountEmptyInit8      | 34,953        | 游릭 **-1,376 (3.79%)**  |
| boxedAccountEmpty8          | 3,401         | 游댮 **+44 (1.31%)**     |
| boxedAccountSizedInit1      | 5,271         | 游댮 **+152 (2.97%)**    |
| boxedAccountSized1          | 783           | 游댮 **+97 (14.14%)**    |
| boxedAccountSizedInit2      | 9,583         | 游릭 **-262 (2.66%)**    |
| boxedAccountSized2          | 1,190         | 游댮 **+105 (9.68%)**    |
| boxedAccountSizedInit4      | 18,230        | 游릭 **-595 (3.16%)**    |
| boxedAccountSized4          | 1,996         | 游댮 **+122 (6.51%)**    |
| boxedAccountSizedInit8      | 35,553        | 游릭 **-1,271 (3.45%)**  |
| boxedAccountSized8          | 3,628         | 游댮 **+138 (3.95%)**    |
| boxedAccountUnsizedInit1    | 5,371         | 游댮 **+164 (3.15%)**    |
| boxedAccountUnsized1        | 836           | 游댮 **+115 (15.95%)**   |
| boxedAccountUnsizedInit2    | 9,759         | 游릭 **-256 (2.56%)**    |
| boxedAccountUnsized2        | 1,270         | 游댮 **+113 (9.77%)**    |
| boxedAccountUnsizedInit4    | 18,558        | 游릭 **-602 (3.14%)**    |
| boxedAccountUnsized4        | 2,132         | 游댮 **+113 (5.60%)**    |
| boxedAccountUnsizedInit8    | 36,185        | 游릭 **-1,311 (3.50%)**  |
| boxedAccountUnsized8        | 3,881         | 游댮 **+105 (2.78%)**    |
| boxedInterfaceAccountMint1  | 1,351         | 游릭 **-21 (1.53%)**     |
| boxedInterfaceAccountMint2  | 2,123         | 游릭 **-170 (7.41%)**    |
| boxedInterfaceAccountMint4  | 3,656         | 游릭 **-465 (11.28%)**   |
| boxedInterfaceAccountMint8  | 6,738         | 游릭 **-1,073 (13.74%)** |
| boxedInterfaceAccountToken1 | 2,011         | 游릭 **-45 (2.19%)**     |
| boxedInterfaceAccountToken2 | 3,431         | 游릭 **-229 (6.26%)**    |
| boxedInterfaceAccountToken4 | 6,260         | 游릭 **-598 (8.72%)**    |
| boxedInterfaceAccountToken8 | 11,934        | 游릭 **-1,350 (10.16%)** |
| interfaceAccountMint1       | 1,476         | 游댮 **+4 (0.27%)**      |
| interfaceAccountMint2       | 2,489         | 游릭 **-142 (5.40%)**    |
| interfaceAccountMint4       | 4,511         | 游릭 **-440 (8.89%)**    |
| interfaceAccountMint8       | 8,550         | 游릭 **-1,038 (10.83%)** |
| interfaceAccountToken1      | 2,111         | 游릭 **-19 (0.89%)**     |
| interfaceAccountToken2      | 3,729         | 游릭 **-199 (5.07%)**    |
| interfaceAccountToken4      | 6,955         | 游릭 **-566 (7.53%)**    |
| interface1                  | 769           | 游댮 **+169 (28.17%)**   |
| interface2                  | 912           | 游댮 **+167 (22.42%)**   |
| interface4                  | 1,189         | 游댮 **+156 (15.10%)**   |
| interface8                  | 1,748         | 游댮 **+132 (8.17%)**    |
| program1                    | 779           | 游댮 **+183 (30.70%)**   |
| program2                    | 920           | 游댮 **+183 (24.83%)**   |
| program4                    | 1,193         | 游댮 **+174 (17.08%)**   |
| program8                    | 1,744         | 游댮 **+160 (10.10%)**   |
| signer1                     | 774           | 游댮 **+194 (33.45%)**   |
| signer2                     | 1,064         | 游댮 **+192 (22.02%)**   |
| signer4                     | 1,637         | 游댮 **+183 (12.59%)**   |
| signer8                     | 2,788         | 游댮 **+170 (6.49%)**    |
| systemAccount1              | 796           | 游댮 **+204 (34.46%)**   |
| systemAccount2              | 1,096         | 游댮 **+202 (22.60%)**   |
| systemAccount4              | 1,689         | 游댮 **+192 (12.83%)**   |
| systemAccount8              | 2,880         | 游댮 **+173 (6.39%)**    |
| uncheckedAccount1           | 783           | 游댮 **+220 (39.08%)**   |
| uncheckedAccount2           | 1,056         | 游댮 **+220 (26.32%)**   |
| uncheckedAccount4           | 1,594         | 游댮 **+216 (15.67%)**   |
| uncheckedAccount8           | 2,679         | 游댮 **+211 (8.55%)**    |

### Notable changes

- lang: Update `dispatch` function to support dynamic discriminators ([#3104](https://github.com/coral-xyz/anchor/pull/3104)).
- lang: Remove unnecessary clone in account exit routine ([#3139](https://github.com/coral-xyz/anchor/pull/3139)).

---

## [0.30.1]

Solana version: 1.18.17

| Instruction                 | Compute Units | -   |
| --------------------------- | ------------- | --- |
| accountInfo1                | 601           | -   |
| accountInfo2                | 923           | -   |
| accountInfo4                | 1,583         | -   |
| accountInfo8                | 2,975         | -   |
| accountEmptyInit1           | 5,034         | -   |
| accountEmpty1               | 652           | -   |
| accountEmptyInit2           | 9,687         | -   |
| accountEmpty2               | 1,016         | -   |
| accountEmptyInit4           | 18,501        | -   |
| accountEmpty4               | 1,737         | -   |
| accountEmptyInit8           | 36,169        | -   |
| accountEmpty8               | 3,186         | -   |
| accountSizedInit1           | 5,106         | -   |
| accountSized1               | 668           | -   |
| accountSizedInit2           | 9,828         | -   |
| accountSized2               | 1,046         | -   |
| accountSizedInit4           | 18,837        | -   |
| accountSized4               | 1,807         | -   |
| accountSizedInit8           | 36,761        | -   |
| accountSized8               | 3,326         | -   |
| accountUnsizedInit1         | 5,199         | -   |
| accountUnsized1             | 702           | -   |
| accountUnsizedInit2         | 10,078        | -   |
| accountUnsized2             | 1,116         | -   |
| accountUnsizedInit4         | 19,259        | -   |
| accountUnsized4             | 1,953         | -   |
| accountUnsizedInit8         | 37,331        | -   |
| accountUnsized8             | 3,626         | -   |
| boxedAccountEmptyInit1      | 5,064         | -   |
| boxedAccountEmpty1          | 671           | -   |
| boxedAccountEmptyInit2      | 9,721         | -   |
| boxedAccountEmpty2          | 1,052         | -   |
| boxedAccountEmptyInit4      | 18,582        | -   |
| boxedAccountEmpty4          | 1,811         | -   |
| boxedAccountEmptyInit8      | 36,329        | -   |
| boxedAccountEmpty8          | 3,357         | -   |
| boxedAccountSizedInit1      | 5,119         | -   |
| boxedAccountSized1          | 686           | -   |
| boxedAccountSizedInit2      | 9,845         | -   |
| boxedAccountSized2          | 1,085         | -   |
| boxedAccountSizedInit4      | 18,825        | -   |
| boxedAccountSized4          | 1,874         | -   |
| boxedAccountSizedInit8      | 36,824        | -   |
| boxedAccountSized8          | 3,490         | -   |
| boxedAccountUnsizedInit1    | 5,207         | -   |
| boxedAccountUnsized1        | 721           | -   |
| boxedAccountUnsizedInit2    | 10,015        | -   |
| boxedAccountUnsized2        | 1,157         | -   |
| boxedAccountUnsizedInit4    | 19,160        | -   |
| boxedAccountUnsized4        | 2,019         | -   |
| boxedAccountUnsizedInit8    | 37,496        | -   |
| boxedAccountUnsized8        | 3,776         | -   |
| boxedInterfaceAccountMint1  | 1,372         | -   |
| boxedInterfaceAccountMint2  | 2,293         | -   |
| boxedInterfaceAccountMint4  | 4,121         | -   |
| boxedInterfaceAccountMint8  | 7,811         | -   |
| boxedInterfaceAccountToken1 | 2,056         | -   |
| boxedInterfaceAccountToken2 | 3,660         | -   |
| boxedInterfaceAccountToken4 | 6,858         | -   |
| boxedInterfaceAccountToken8 | 13,284        | -   |
| interfaceAccountMint1       | 1,472         | -   |
| interfaceAccountMint2       | 2,631         | -   |
| interfaceAccountMint4       | 4,951         | -   |
| interfaceAccountMint8       | 9,588         | -   |
| interfaceAccountToken1      | 2,130         | -   |
| interfaceAccountToken2      | 3,928         | -   |
| interfaceAccountToken4      | 7,521         | -   |
| interface1                  | 600           | -   |
| interface2                  | 745           | -   |
| interface4                  | 1,033         | -   |
| interface8                  | 1,616         | -   |
| program1                    | 596           | -   |
| program2                    | 737           | -   |
| program4                    | 1,019         | -   |
| program8                    | 1,584         | -   |
| signer1                     | 580           | -   |
| signer2                     | 872           | -   |
| signer4                     | 1,454         | -   |
| signer8                     | 2,618         | -   |
| systemAccount1              | 592           | -   |
| systemAccount2              | 894           | -   |
| systemAccount4              | 1,497         | -   |
| systemAccount8              | 2,707         | -   |
| uncheckedAccount1           | 563           | -   |
| uncheckedAccount2           | 836           | -   |
| uncheckedAccount4           | 1,378         | -   |
| uncheckedAccount8           | 2,468         | -   |

### Notable changes

---

## [0.30.0]

Solana version: 1.18.8

| Instruction                 | Compute Units | -                      |
| --------------------------- | ------------- | ---------------------- |
| accountInfo1                | 601           | 游릭 **-94 (13.53%)**    |
| accountInfo2                | 923           | 游릭 **-112 (10.82%)**   |
| accountInfo4                | 1,583         | 游릭 **-147 (8.50%)**    |
| accountInfo8                | 2,975         | 游릭 **-367 (10.98%)**   |
| accountEmptyInit1           | 5,034         | 游릭 **-518 (9.33%)**    |
| accountEmpty1               | 652           | 游릭 **-167 (20.39%)**   |
| accountEmptyInit2           | 9,687         | 游릭 **-734 (7.04%)**    |
| accountEmpty2               | 1,016         | 游릭 **-259 (20.31%)**   |
| accountEmptyInit4           | 18,501        | 游릭 **-1,302 (6.57%)**  |
| accountEmpty4               | 1,737         | 游릭 **-440 (20.21%)**   |
| accountEmptyInit8           | 36,169        | 游릭 **-2,440 (6.32%)**  |
| accountEmpty8               | 3,186         | 游릭 **-804 (20.15%)**   |
| accountSizedInit1           | 5,106         | 游릭 **-541 (9.58%)**    |
| accountSized1               | 668           | 游릭 **-175 (20.76%)**   |
| accountSizedInit2           | 9,828         | 游릭 **-779 (7.34%)**    |
| accountSized2               | 1,046         | 游릭 **-271 (20.58%)**   |
| accountSizedInit4           | 18,837        | 游릭 **-1,388 (6.86%)**  |
| accountSized4               | 1,807         | 游릭 **-467 (20.54%)**   |
| accountSizedInit8           | 36,761        | 游릭 **-2,615 (6.64%)**  |
| accountSized8               | 3,326         | 游릭 **-859 (20.53%)**   |
| accountUnsizedInit1         | 5,199         | 游릭 **-541 (9.43%)**    |
| accountUnsized1             | 702           | 游릭 **-168 (19.31%)**   |
| accountUnsizedInit2         | 10,078        | 游릭 **-778 (7.17%)**    |
| accountUnsized2             | 1,116         | 游릭 **-263 (19.07%)**   |
| accountUnsizedInit4         | 19,259        | 游릭 **-1,393 (6.75%)**  |
| accountUnsized4             | 1,953         | 游릭 **-458 (19.00%)**   |
| accountUnsizedInit8         | 37,331        | 游릭 **-2,638 (6.60%)**  |
| accountUnsized8             | 3,626         | 游릭 **-852 (19.03%)**   |
| boxedAccountEmptyInit1      | 5,064         | 游릭 **-541 (9.65%)**    |
| boxedAccountEmpty1          | 671           | 游릭 **-185 (21.61%)**   |
| boxedAccountEmptyInit2      | 9,721         | 游릭 **-801 (7.61%)**    |
| boxedAccountEmpty2          | 1,052         | 游릭 **-295 (21.90%)**   |
| boxedAccountEmptyInit4      | 18,582        | 游릭 **-1,420 (7.10%)**  |
| boxedAccountEmpty4          | 1,811         | 游릭 **-513 (22.07%)**   |
| boxedAccountEmptyInit8      | 36,329        | 游릭 **-2,673 (6.85%)**  |
| boxedAccountEmpty8          | 3,357         | 游릭 **-954 (22.13%)**   |
| boxedAccountSizedInit1      | 5,119         | 游릭 **-567 (9.97%)**    |
| boxedAccountSized1          | 686           | 游릭 **-192 (21.87%)**   |
| boxedAccountSizedInit2      | 9,845         | 游릭 **-845 (7.90%)**    |
| boxedAccountSized2          | 1,085         | 游릭 **-309 (22.17%)**   |
| boxedAccountSizedInit4      | 18,825        | 游릭 **-1,513 (7.44%)**  |
| boxedAccountSized4          | 1,874         | 游릭 **-539 (22.34%)**   |
| boxedAccountSizedInit8      | 36,824        | 游릭 **-2,846 (7.17%)**  |
| boxedAccountSized8          | 3,490         | 游릭 **-1,003 (22.32%)** |
| boxedAccountUnsizedInit1    | 5,207         | 游릭 **-567 (9.82%)**    |
| boxedAccountUnsized1        | 721           | 游릭 **-187 (20.59%)**   |
| boxedAccountUnsizedInit2    | 10,015        | 游릭 **-851 (7.83%)**    |
| boxedAccountUnsized2        | 1,157         | 游릭 **-300 (20.59%)**   |
| boxedAccountUnsizedInit4    | 19,160        | 游릭 **-1,528 (7.39%)**  |
| boxedAccountUnsized4        | 2,019         | 游릭 **-527 (20.70%)**   |
| boxedAccountUnsizedInit8    | 37,496        | 游릭 **-2,879 (7.13%)**  |
| boxedAccountUnsized8        | 3,776         | 游릭 **-983 (20.66%)**   |
| boxedInterfaceAccountMint1  | 1,372         | 游릭 **-824 (37.52%)**   |
| boxedInterfaceAccountMint2  | 2,293         | 游릭 **-1,554 (40.40%)** |
| boxedInterfaceAccountMint4  | 4,121         | 游릭 **-3,011 (42.22%)** |
| boxedInterfaceAccountMint8  | 7,811         | 游릭 **-5,932 (43.16%)** |
| boxedInterfaceAccountToken1 | 2,056         | 游릭 **-70 (3.29%)**     |
| boxedInterfaceAccountToken2 | 3,660         | 游릭 **-46 (1.24%)**     |
| boxedInterfaceAccountToken4 | 6,858         | 游댮 **+5 (0.07%)**      |
| boxedInterfaceAccountToken8 | 13,284        | 游댮 **+100 (0.76%)**    |
| interfaceAccountMint1       | 1,472         | 游릭 **-813 (35.58%)**   |
| interfaceAccountMint2       | 2,631         | 游릭 **-1,547 (37.03%)** |
| interfaceAccountMint4       | 4,951         | 游릭 **-3,013 (37.83%)** |
| interfaceAccountMint8       | 9,588         | 游릭 **-5,950 (38.29%)** |
| interfaceAccountToken1      | 2,130         | 游릭 **-82 (3.71%)**     |
| interfaceAccountToken2      | 3,928         | 游릭 **-102 (2.53%)**    |
| interfaceAccountToken4      | 7,521         | 游릭 **-142 (1.85%)**    |
| interface1                  | 600           | 游릭 **-141 (19.03%)**   |
| interface2                  | 745           | 游릭 **-189 (20.24%)**   |
| interface4                  | 1,033         | 游릭 **-282 (21.44%)**   |
| interface8                  | 1,616         | 游릭 **-470 (22.53%)**   |
| program1                    | 596           | 游릭 **-145 (19.57%)**   |
| program2                    | 737           | 游릭 **-197 (21.09%)**   |
| program4                    | 1,019         | 游릭 **-298 (22.63%)**   |
| program8                    | 1,584         | 游릭 **-502 (24.07%)**   |
| signer1                     | 580           | 游릭 **-95 (14.07%)**    |
| signer2                     | 872           | 游릭 **-115 (11.65%)**   |
| signer4                     | 1,454         | 游릭 **-152 (9.46%)**    |
| signer8                     | 2,618         | 游릭 **-228 (8.01%)**    |
| systemAccount1              | 592           | 游릭 **-137 (18.79%)**   |
| systemAccount2              | 894           | 游릭 **-199 (18.21%)**   |
| systemAccount4              | 1,497         | 游릭 **-320 (17.61%)**   |
| systemAccount8              | 2,707         | 游릭 **-564 (17.24%)**   |
| uncheckedAccount1           | 563           | 游릭 **-94 (14.31%)**    |
| uncheckedAccount2           | 836           | 游릭 **-113 (11.91%)**   |
| uncheckedAccount4           | 1,378         | 游릭 **-148 (9.70%)**    |
| uncheckedAccount8           | 2,468         | 游릭 **-220 (8.18%)**    |

### Notable changes

- Upgrade Solana to `1.18.8` ([#2867](https://github.com/coral-xyz/anchor/pull/2867)).

---

## [0.29.0]

Solana version: 1.17.0

| Instruction                 | Compute Units | +/-                    |
| --------------------------- | ------------- | ---------------------- |
| accountInfo1                | 695           | 游릭 **-431 (38.28%)**   |
| accountInfo2                | 1,035         | 游릭 **-651 (38.61%)**   |
| accountInfo4                | 1,730         | 游릭 **-645 (27.16%)**   |
| accountInfo8                | 3,342         | 游릭 **-1,310 (28.16%)** |
| accountEmptyInit1           | 5,552         | 游릭 **-919 (14.20%)**   |
| accountEmpty1               | 819           | 游릭 **-441 (35.00%)**   |
| accountEmptyInit2           | 10,421        | 游릭 **-1,079 (9.38%)**  |
| accountEmpty2               | 1,275         | 游릭 **-690 (35.11%)**   |
| accountEmptyInit4           | 19,803        | 游릭 **-1,691 (7.87%)**  |
| accountEmpty4               | 2,177         | 游릭 **-774 (26.23%)**   |
| accountEmptyInit8           | 38,609        | 游릭 **-2,418 (5.89%)**  |
| accountEmpty8               | 3,990         | 游릭 **-1,837 (31.53%)** |
| accountSizedInit1           | 5,647         | 游릭 **-937 (14.23%)**   |
| accountSized1               | 843           | 游릭 **-482 (36.38%)**   |
| accountSizedInit2           | 10,607        | 游릭 **-1,183 (10.03%)** |
| accountSized2               | 1,317         | 游릭 **-767 (36.80%)**   |
| accountSizedInit4           | 20,225        | 游릭 **-1,755 (7.98%)**  |
| accountSized4               | 2,274         | 游릭 **-899 (28.33%)**   |
| accountSizedInit8           | 39,376        | 游릭 **-2,556 (6.10%)**  |
| accountSized8               | 4,185         | 游릭 **-1,979 (32.11%)** |
| accountUnsizedInit1         | 5,740         | 游릭 **-978 (14.56%)**   |
| accountUnsized1             | 870           | 游릭 **-579 (39.96%)**   |
| accountUnsizedInit2         | 10,856        | 游릭 **-1,195 (9.92%)**  |
| accountUnsized2             | 1,379         | 游릭 **-610 (30.67%)**   |
| accountUnsizedInit4         | 20,652        | 游릭 **-1,721 (7.69%)**  |
| accountUnsized4             | 2,411         | 游릭 **-1,136 (32.03%)** |
| accountUnsizedInit8         | 39,969        | 游릭 **-2,985 (6.95%)**  |
| accountUnsized8             | 4,478         | 游릭 **-2,285 (33.79%)** |
| boxedAccountEmptyInit1      | 5,605         | 游릭 **-1,083 (16.19%)** |
| boxedAccountEmpty1          | 856           | 游릭 **-143 (14.31%)**   |
| boxedAccountEmptyInit2      | 10,522        | 游릭 **-1,209 (10.31%)** |
| boxedAccountEmpty2          | 1,347         | 游릭 **-265 (16.44%)**   |
| boxedAccountEmptyInit4      | 20,002        | 游릭 **-1,295 (6.08%)**  |
| boxedAccountEmpty4          | 2,324         | 游릭 **-511 (18.02%)**   |
| boxedAccountEmptyInit8      | 39,002        | 游릭 **-1,896 (4.64%)**  |
| boxedAccountEmpty8          | 4,311         | 游릭 **-1,159 (21.19%)** |
| boxedAccountSizedInit1      | 5,686         | 游릭 **-1,104 (16.26%)** |
| boxedAccountSized1          | 878           | 游릭 **-150 (14.59%)**   |
| boxedAccountSizedInit2      | 10,690        | 游릭 **-1,248 (10.45%)** |
| boxedAccountSized2          | 1,394         | 游릭 **-280 (16.73%)**   |
| boxedAccountSizedInit4      | 20,338        | 游릭 **-1,375 (6.33%)**  |
| boxedAccountSized4          | 2,413         | 游릭 **-541 (18.31%)**   |
| boxedAccountSizedInit8      | 39,670        | 游릭 **-2,059 (4.93%)**  |
| boxedAccountSized8          | 4,493         | 游릭 **-1,216 (21.30%)** |
| boxedAccountUnsizedInit1    | 5,774         | 游릭 **-1,132 (16.39%)** |
| boxedAccountUnsized1        | 908           | 游릭 **-175 (16.16%)**   |
| boxedAccountUnsizedInit2    | 10,866        | 游릭 **-1,304 (10.71%)** |
| boxedAccountUnsized2        | 1,457         | 游릭 **-324 (18.19%)**   |
| boxedAccountUnsizedInit4    | 20,688        | 游릭 **-1,484 (6.69%)**  |
| boxedAccountUnsized4        | 2,546         | 游릭 **-633 (19.91%)**   |
| boxedAccountUnsizedInit8    | 40,375        | 游릭 **-2,274 (5.33%)**  |
| boxedAccountUnsized8        | 4,759         | 游릭 **-1,399 (22.72%)** |
| boxedInterfaceAccountMint1  | 2,196         | 游릭 **-211 (8.77%)**    |
| boxedInterfaceAccountMint2  | 3,847         | 游릭 **-403 (9.48%)**    |
| boxedInterfaceAccountMint4  | 7,132         | 游릭 **-792 (9.99%)**    |
| boxedInterfaceAccountMint8  | 13,743        | 游릭 **-1,719 (11.12%)** |
| boxedInterfaceAccountToken1 | 2,126         | 游릭 **-8 (0.37%)**      |
| boxedInterfaceAccountToken2 | 3,706         | 游댮 **+3 (0.08%)**      |
| boxedInterfaceAccountToken4 | 6,853         | 游댮 **+20 (0.29%)**     |
| boxedInterfaceAccountToken8 | 13,184        | 游릭 **-95 (0.72%)**     |
| interfaceAccountMint1       | 2,285         | 游릭 **-190 (7.68%)**    |
| interfaceAccountMint2       | 4,178         | 游릭 **-973 (18.89%)**   |
| interfaceAccountMint4       | 7,964         | 游릭 **-1,980 (19.91%)** |
| interfaceAccountMint8       | 15,538        | 游릭 **-3,043 (16.38%)** |
| interfaceAccountToken1      | 2,212         | 游댮 **+10 (0.45%)**     |
| interfaceAccountToken2      | 4,030         | 游릭 **-39 (0.96%)**     |
| interfaceAccountToken4      | 7,663         | 游릭 **-25 (0.33%)**     |
| interface1                  | 741           | 游릭 **-429 (36.67%)**   |
| interface2                  | 934           | 游릭 **-666 (41.63%)**   |
| interface4                  | 1,315         | 游릭 **-726 (35.57%)**   |
| interface8                  | 2,086         | 游릭 **-1,741 (45.49%)** |
| program1                    | 741           | 游릭 **-423 (36.34%)**   |
| program2                    | 934           | 游릭 **-654 (41.18%)**   |
| program4                    | 1,317         | 游릭 **-702 (34.77%)**   |
| program8                    | 2,086         | 游릭 **-1,693 (44.80%)** |
| signer1                     | 675           | 游릭 **-454 (40.21%)**   |
| signer2                     | 987           | 游릭 **-708 (41.77%)**   |
| signer4                     | 1,606         | 游릭 **-789 (32.94%)**   |
| signer8                     | 2,846         | 游릭 **-1,845 (39.33%)** |
| systemAccount1              | 729           | 游릭 **-454 (38.38%)**   |
| systemAccount2              | 1,093         | 游릭 **-708 (39.31%)**   |
| systemAccount4              | 1,817         | 游릭 **-789 (30.28%)**   |
| systemAccount8              | 3,271         | 游릭 **-1,845 (36.06%)** |
| uncheckedAccount1           | 657           | 游릭 **-468 (41.60%)**   |
| uncheckedAccount2           | 949           | 游릭 **-737 (43.71%)**   |
| uncheckedAccount4           | 1,526         | 游릭 **-850 (35.77%)**   |
| uncheckedAccount8           | 2,688         | 游릭 **-1,964 (42.22%)** |

### Notable changes

- `Box` the `anchor_lang::Result` error variants ([#2600](https://github.com/coral-xyz/anchor/pull/2600)).
- Change all accounts to have a reference to `AccountInfo` instead of cloning ([#2656](https://github.com/coral-xyz/anchor/pull/2656)).
- Reduce unnecessary cloning ([#2663](https://github.com/coral-xyz/anchor/pull/2663)).

---

## [0.28.0]

Solana version: 1.16.0

| Instruction                 | Compute Units | +/-                    |
| --------------------------- | ------------- | ---------------------- |
| accountInfo1                | 1,126         | 游댮 **+63 (5.93%)**     |
| accountInfo2                | 1,686         | 游릭 **-88 (4.96%)**     |
| accountInfo4                | 2,375         | 游릭 **-87 (3.53%)**     |
| accountInfo8                | 4,652         | 游댮 **+1 (0.02%)**      |
| accountEmptyInit1           | 6,471         | 游릭 **-177 (2.66%)**    |
| accountEmpty1               | 1,260         | 游댮 **+61 (5.09%)**     |
| accountEmptyInit2           | 11,500        | 游릭 **-247 (2.10%)**    |
| accountEmpty2               | 1,965         | 游릭 **-94 (4.57%)**     |
| accountEmptyInit4           | 21,494        | 游릭 **-202 (0.93%)**    |
| accountEmpty4               | 2,951         | 游릭 **-98 (3.21%)**     |
| accountEmptyInit8           | 41,027        | 游릭 **-585 (1.41%)**    |
| accountEmpty8               | 5,827         | 游릭 **-11 (0.19%)**     |
| accountSizedInit1           | 6,584         | 游릭 **-175 (2.59%)**    |
| accountSized1               | 1,325         | 游댮 **+81 (6.51%)**     |
| accountSizedInit2           | 11,790        | 游릭 **-178 (1.49%)**    |
| accountSized2               | 2,084         | 游릭 **-89 (4.10%)**     |
| accountSizedInit4           | 21,980        | 游릭 **-158 (0.71%)**    |
| accountSized4               | 3,173         | 游릭 **-17 (0.53%)**     |
| accountSizedInit8           | 41,932        | 游릭 **-568 (1.34%)**    |
| accountSized8               | 6,164         | 游댮 **+10 (0.16%)**     |
| accountUnsizedInit1         | 6,718         | 游릭 **-177 (2.57%)**    |
| accountUnsized1             | 1,449         | 游댮 **+97 (7.17%)**     |
| accountUnsizedInit2         | 12,051        | 游릭 **-188 (1.54%)**    |
| accountUnsized2             | 1,989         | 游릭 **-111 (5.29%)**    |
| accountUnsizedInit4         | 22,373        | 游릭 **-309 (1.36%)**    |
| accountUnsized4             | 3,547         | 游댮 **+40 (1.14%)**     |
| accountUnsizedInit8         | 42,954        | 游릭 **-632 (1.45%)**    |
| accountUnsized8             | 6,763         | 游릭 **-83 (1.21%)**     |
| boxedAccountEmptyInit1      | 6,688         | 游릭 **-162 (2.36%)**    |
| boxedAccountEmpty1          | 999           | 游릭 **-86 (7.93%)**     |
| boxedAccountEmptyInit2      | 11,731        | 游릭 **-226 (1.89%)**    |
| boxedAccountEmpty2          | 1,612         | 游릭 **-94 (5.51%)**     |
| boxedAccountEmptyInit4      | 21,297        | 游릭 **-342 (1.58%)**    |
| boxedAccountEmpty4          | 2,835         | 游릭 **-98 (3.34%)**     |
| boxedAccountEmptyInit8      | 40,898        | 游릭 **-588 (1.42%)**    |
| boxedAccountEmpty8          | 5,470         | 游릭 **-105 (1.88%)**    |
| boxedAccountSizedInit1      | 6,790         | 游릭 **-162 (2.33%)**    |
| boxedAccountSized1          | 1,028         | 游릭 **-84 (7.55%)**     |
| boxedAccountSizedInit2      | 11,938        | 游릭 **-222 (1.83%)**    |
| boxedAccountSized2          | 1,674         | 游릭 **-87 (4.94%)**     |
| boxedAccountSizedInit4      | 21,713        | 游릭 **-334 (1.51%)**    |
| boxedAccountSized4          | 2,954         | 游릭 **-91 (2.99%)**     |
| boxedAccountSizedInit8      | 41,729        | 游릭 **-572 (1.35%)**    |
| boxedAccountSized8          | 5,709         | 游릭 **-89 (1.54%)**     |
| boxedAccountUnsizedInit1    | 6,906         | 游릭 **-170 (2.40%)**    |
| boxedAccountUnsized1        | 1,083         | 游릭 **-95 (8.06%)**     |
| boxedAccountUnsizedInit2    | 12,170        | 游릭 **-238 (1.92%)**    |
| boxedAccountUnsized2        | 1,781         | 游릭 **-105 (5.57%)**    |
| boxedAccountUnsizedInit4    | 22,172        | 游릭 **-366 (1.62%)**    |
| boxedAccountUnsized4        | 3,179         | 游릭 **-123 (3.73%)**    |
| boxedAccountUnsizedInit8    | 42,649        | 游릭 **-636 (1.47%)**    |
| boxedAccountUnsized8        | 6,158         | 游릭 **-154 (2.44%)**    |
| boxedInterfaceAccountMint1  | 2,407         | 游릭 **-1 (0.04%)**      |
| boxedInterfaceAccountMint2  | 4,250         | 游댮 **+74 (1.77%)**     |
| boxedInterfaceAccountMint4  | 7,924         | 游댮 **+235 (3.06%)**    |
| boxedInterfaceAccountMint8  | 15,462        | 游댮 **+556 (3.73%)**    |
| boxedInterfaceAccountToken1 | 2,134         | 游댮 **+288 (15.60%)**   |
| boxedInterfaceAccountToken2 | 3,703         | 游댮 **+652 (21.37%)**   |
| boxedInterfaceAccountToken4 | 6,833         | 游댮 **+1,391 (25.56%)** |
| boxedInterfaceAccountToken8 | 13,279        | 游댮 **+2,867 (27.54%)** |
| interfaceAccountMint1       | 2,475         | 游릭 **-164 (6.21%)**    |
| interfaceAccountMint2       | 5,151         | 游댮 **+302 (6.23%)**    |
| interfaceAccountMint4       | 9,944         | 游댮 **+362 (3.78%)**    |
| interfaceAccountMint8       | 18,581        | 游댮 **+665 (3.71%)**    |
| interfaceAccountToken1      | 2,202         | 游댮 **+338 (18.13%)**   |
| interfaceAccountToken2      | 4,069         | 游댮 **+735 (22.05%)**   |
| interfaceAccountToken4      | 7,688         | 游댮 **+1,531 (24.87%)** |
| interface1                  | 1,170         | 游댮 **+62 (5.60%)**     |
| interface2                  | 1,600         | 游릭 **-97 (5.72%)**     |
| interface4                  | 2,041         | 游릭 **-106 (4.94%)**    |
| interface8                  | 3,827         | 游릭 **-31 (0.80%)**     |
| program1                    | 1,164         | 游댮 **+56 (5.05%)**     |
| program2                    | 1,588         | 游릭 **-108 (6.37%)**    |
| program4                    | 2,019         | 游릭 **-130 (6.05%)**    |
| program8                    | 3,779         | 游릭 **-79 (2.05%)**     |
| signer1                     | 1,129         | 游댮 **+62 (5.81%)**     |
| signer2                     | 1,695         | 游릭 **-88 (4.94%)**     |
| signer4                     | 2,395         | 游릭 **-87 (3.51%)**     |
| signer8                     | 4,691         | 游댮 **+1 (0.02%)**      |
| systemAccount1              | 1,183         | 游댮 **+61 (5.44%)**     |
| systemAccount2              | 1,801         | 游릭 **-92 (4.86%)**     |
| systemAccount4              | 2,606         | 游릭 **-95 (3.52%)**     |
| systemAccount8              | 5,116         | 游릭 **-15 (0.29%)**     |
| uncheckedAccount1           | 1,125         | 游댮 **+63 (5.93%)**     |
| uncheckedAccount2           | 1,686         | 游릭 **-88 (4.96%)**     |
| uncheckedAccount4           | 2,376         | 游릭 **-87 (3.53%)**     |
| uncheckedAccount8           | 4,652         | 游댮 **+2 (0.04%)**      |

### Notable changes

- Upgrading Solana to `1.16`. The difference in compute units usage between `0.27.0` and `0.28.0` is the direct result of upgrading Solana version(both build tools and crates) ([#2512](https://github.com/coral-xyz/anchor/pull/2512)).

---

## [0.27.0]

Solana version: 1.14.16

| Instruction                 | Compute Units | +/- |
| --------------------------- | ------------- | --- |
| accountInfo1                | 1,063         | N/A |
| accountInfo2                | 1,774         | N/A |
| accountInfo4                | 2,462         | N/A |
| accountInfo8                | 4,651         | N/A |
| accountEmptyInit1           | 6,648         | N/A |
| accountEmpty1               | 1,199         | N/A |
| accountEmptyInit2           | 11,747        | N/A |
| accountEmpty2               | 2,059         | N/A |
| accountEmptyInit4           | 21,696        | N/A |
| accountEmpty4               | 3,049         | N/A |
| accountEmptyInit8           | 41,612        | N/A |
| accountEmpty8               | 5,838         | N/A |
| accountSizedInit1           | 6,759         | N/A |
| accountSized1               | 1,244         | N/A |
| accountSizedInit2           | 11,968        | N/A |
| accountSized2               | 2,173         | N/A |
| accountSizedInit4           | 22,138        | N/A |
| accountSized4               | 3,190         | N/A |
| accountSizedInit8           | 42,500        | N/A |
| accountSized8               | 6,154         | N/A |
| accountUnsizedInit1         | 6,895         | N/A |
| accountUnsized1             | 1,352         | N/A |
| accountUnsizedInit2         | 12,239        | N/A |
| accountUnsized2             | 2,100         | N/A |
| accountUnsizedInit4         | 22,682        | N/A |
| accountUnsized4             | 3,507         | N/A |
| accountUnsizedInit8         | 43,586        | N/A |
| accountUnsized8             | 6,846         | N/A |
| boxedAccountEmptyInit1      | 6,850         | N/A |
| boxedAccountEmpty1          | 1,085         | N/A |
| boxedAccountEmptyInit2      | 11,957        | N/A |
| boxedAccountEmpty2          | 1,706         | N/A |
| boxedAccountEmptyInit4      | 21,639        | N/A |
| boxedAccountEmpty4          | 2,933         | N/A |
| boxedAccountEmptyInit8      | 41,486        | N/A |
| boxedAccountEmpty8          | 5,575         | N/A |
| boxedAccountSizedInit1      | 6,952         | N/A |
| boxedAccountSized1          | 1,112         | N/A |
| boxedAccountSizedInit2      | 12,160        | N/A |
| boxedAccountSized2          | 1,761         | N/A |
| boxedAccountSizedInit4      | 22,047        | N/A |
| boxedAccountSized4          | 3,045         | N/A |
| boxedAccountSizedInit8      | 42,301        | N/A |
| boxedAccountSized8          | 5,798         | N/A |
| boxedAccountUnsizedInit1    | 7,076         | N/A |
| boxedAccountUnsized1        | 1,178         | N/A |
| boxedAccountUnsizedInit2    | 12,408        | N/A |
| boxedAccountUnsized2        | 1,886         | N/A |
| boxedAccountUnsizedInit4    | 22,538        | N/A |
| boxedAccountUnsized4        | 3,302         | N/A |
| boxedAccountUnsizedInit8    | 43,285        | N/A |
| boxedAccountUnsized8        | 6,312         | N/A |
| boxedInterfaceAccountMint1  | 2,408         | N/A |
| boxedInterfaceAccountMint2  | 4,176         | N/A |
| boxedInterfaceAccountMint4  | 7,689         | N/A |
| boxedInterfaceAccountMint8  | 14,906        | N/A |
| boxedInterfaceAccountToken1 | 1,846         | N/A |
| boxedInterfaceAccountToken2 | 3,051         | N/A |
| boxedInterfaceAccountToken4 | 5,442         | N/A |
| boxedInterfaceAccountToken8 | 10,412        | N/A |
| interfaceAccountMint1       | 2,639         | N/A |
| interfaceAccountMint2       | 4,849         | N/A |
| interfaceAccountMint4       | 9,582         | N/A |
| interfaceAccountMint8       | 17,916        | N/A |
| interfaceAccountToken1      | 1,864         | N/A |
| interfaceAccountToken2      | 3,334         | N/A |
| interfaceAccountToken4      | 6,157         | N/A |
| interface1                  | 1,108         | N/A |
| interface2                  | 1,697         | N/A |
| interface4                  | 2,147         | N/A |
| interface8                  | 3,858         | N/A |
| program1                    | 1,108         | N/A |
| program2                    | 1,696         | N/A |
| program4                    | 2,149         | N/A |
| program8                    | 3,858         | N/A |
| signer1                     | 1,067         | N/A |
| signer2                     | 1,783         | N/A |
| signer4                     | 2,482         | N/A |
| signer8                     | 4,690         | N/A |
| systemAccount1              | 1,122         | N/A |
| systemAccount2              | 1,893         | N/A |
| systemAccount4              | 2,701         | N/A |
| systemAccount8              | 5,131         | N/A |
| uncheckedAccount1           | 1,062         | N/A |
| uncheckedAccount2           | 1,774         | N/A |
| uncheckedAccount4           | 2,463         | N/A |
| uncheckedAccount8           | 4,650         | N/A |

---
